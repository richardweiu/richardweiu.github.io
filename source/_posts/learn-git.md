---
title: Learn Git Again
date: 2016-07-31 20:48:15
tags: " Git "
categories: " Git "

---

> **前言**
　　以前使用 git 只用最常用的的三个命令 `git add`、`git commit`、`git push`，当初也没有认真全面的去了解过 git 相关的使用，为了能够在 windows 和 linux 同使用，来回的切换，今天主要是罗列一下一些使用 GUI 之后不太常用的命令
　　主要也是因为最近在两个平台间切换的时候，分支的一些修改，遇到一些问题，然后命令又忘记的窘境
  
#### git 的来源 ####

当一个简单的程序变得很复杂很庞大的时候，当一个程序的开源出来的时候，有很多人在修改，很多人在为同一个软件贡献自己的一份力量的时候，我们会选择使用版本控制软件，如 svn，git，cvs等等，这样能够很迅速、很高效的帮助我们完善整个软件，提高代码质量，同时也给我们吃后悔药的机会，如版本回退。这是我们使用版本控制软件的原因。

而且 git 的诞生也是有[故事](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137402760310626208b4f695940a49e5348b689d095fc000)背景的。



#### git 的优势 ####

git 有别与 svn 在于其是分布式版本控制，而 svn　是集中式版本控制，还有一个就是分支的管理

#### git 常用命令 ####

首先我们为我们的工作或者是代码版本管理的工作区所在的位置初始化一下

```
git init
```

初始化之后我们的目录下会多一个 .git 的隐藏文件夹，这里面装的东西就很重要了，主要是你的暂存区，指向当前版本的头指针等等的一些用于版本控制的文件

初始化好本地的仓库之后，我们常用 add 命令来将文件的修改保存到我们的暂存区

```
#提交所有的文件
git add *

#提交某一个修改的文件
git add filename
```

将文件提交到暂存区之后，我们就需要提交给我们本地的仓库的主要分支里面

```
#xxxx代表对这次修改的一个描述
git commit -m "XXXXXX"
```

这只是提交给我们本地的仓库里面，但是与远程主机中的代码并没有任何关系，所以我们需要下面这个命令，将我们的修改推送到远程的主机中去

```
git push

#若是第一次推送我们需要这样的一个命令
git push -u origin master
```

想要推送到远程主机中的话，我们必须要与远程主机有关联才行呀

```
git remote add origin git@github.com:xxxx这是仓库的地址.git
```

当然若是我们出门在外，但是也需要查看我们的代码，修改我们的代码的，我们首先也的下载下来

```
git clone 你的项目地址
```

我们完成了修改，在提交之前我们可以查看一下我们修改了哪些文件和修改了哪些内容

```
#查看我们修改了哪些文件，是否提交了
git status

#查看我们具体修改了哪些东西，哪些内容
git diff

```

在每次的修改提交之后都会有日志的记录的

```
#显示从最近到最远的提交日志
git log

#显示简要的信息
git log --pretty=oneline
```

既然是版本控制，当然是有后悔药可以吃的

```
#回退到上一个版本去，放弃这个错误版本的修改
git reset --hard HEAD^

#HEAD头指针指向的就是当前的版本
#"^"一个这个代表上一个版本，两个这个代表回退两次，若是n次的话
git reset --hard HEAD~n
```

若是我们再次后悔了，发现其实并没有必要回退，这次写的还没有上次写得好，我们还是有后悔药可以吃的。因为每次的提交都会有一个 `commit id` 这个值应该是一个 md5 值来判断修改的

```
#回到我们回退之前的那个版本，commit_id就是之前那个版本的commit_id
git reset --hard commit_id

#若是这回退之前我们有查看，并有记录，这里可以看到（这个方法是在回退之前，因为回退之后之前的提交记录是看不见的）
git log

#若是回退之前并没有查看或这记录，用这个
git reflog

#这个命令记录了我们每次命令的记录

```

我们在使用 add 提交到暂存区的时候发现提交的有问题，或者还没有提交上去改了太多但是有问题，我们可以撤销这次的修改

```
#把文件在工作区的修改全部撤销
git checkout -- filename

#这里有两种情况：
#一种是文件自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；
#一种是文件已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。

```

为了更加的保险，或者为了开发不确定的功能，为了不污染主分支的代码，我们会新建一个分支来开发，并在分支间切换

```
#创建一个新的分支，并切换到该分支下面
git checkout -b branchname

#切换当前的分支
git checkout branchname

```

当我们完成了新功能的添加与测试之后我们会选择合并两个分支

```
git merge branchname

#若是两个版本中对同一个文件做出了修改，此时会造成合并冲突
```

合并了分支之后那个分支其实并没有什么作用了，所以我们可以把它删除掉

```
git branch -d branchname
```

我们可以通过这样的命令来查看分支的信息

```
git branch -av
```

我们也可以通过这样的命令来查看远程库的的信息以及本地的分支信息

```
git remote show origin	
```

从展示出来的信息中我们可能遇到部分的分支处于 stale 状态，这是在远程库中该分支已经被删除了，而我们使用 `git branch -a` 是看不到的，我们就可以使用这样一个命令来删除相较于远程库中，本地库中多余的分支

```
git remote prune origin

or

git fetch -p
```

同时我们可以使用这样的一个命令去将本地的 branch 与远程库中的关联

```
git branch --set-upstream-to=origin/branchname
```

当然我们也可以使用这样的一个命令去删除远程库中的分支

```
git push origin --delete 
```

今天主要是对 git 一些常用的命令的一些回顾，找个时间也研究研究 git 的实现原理。

